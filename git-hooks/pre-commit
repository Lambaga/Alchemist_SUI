#!/bin/sh
# Pre-commit Hook f√ºr automatische Cache-Bereinigung
# Speichere diese Datei als .git/hooks/pre-commit

echo "üßπ Automatische Cache-Bereinigung vor Commit..."

# Pr√ºfe ob Python verf√ºgbar ist
if command -v python >/dev/null 2>&1; then
    # F√ºhre intelligente Cache-Bereinigung aus
    python smart_cache_cleaner.py --mode=smart
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ Cache-Bereinigung erfolgreich"
    else
        echo "‚ö†Ô∏è Cache-Bereinigung fehlgeschlagen, f√ºhre Fallback aus"
        
        # Fallback: Einfache Bereinigung
        find . -name "*.pyc" -delete 2>/dev/null
        find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null
        
        echo "‚úÖ Fallback-Bereinigung abgeschlossen"
    fi
else
    echo "‚ö†Ô∏è Python nicht gefunden, √ºberspringe Cache-Bereinigung"
fi

# Commit fortsetzen
exit 0
